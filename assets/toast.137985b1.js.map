{"version":3,"file":"toast.137985b1.js","sources":["../../src/plugins/toast.ts"],"sourcesContent":["import { createVNode, render, getCurrentInstance, nextTick } from \"vue\";\nimport { FToast, types, ToastAction } from \"../components/FToast/FToast\";\n\nimport type { App, VNode } from \"vue\";\n\nexport interface ToastProps {\n  type?: typeof types[number];\n  message?: string;\n  action?: ToastAction;\n}\n\nexport interface ToastGlobalOptions {\n  location: any;\n  timeout: number;\n  [key: string]: any;\n}\n\nexport type ToastHandler = {\n  close: () => void;\n};\n\nexport type Keys = \"show\" | \"success\" | \"error\" | \"warning\" | \"clear\";\n\nexport type ToastMethods = Record<Keys, (options?: ToastProps) => void>;\n\nexport function useToast() {\n  const instance = getCurrentInstance()!;\n\n  return instance.appContext.config.globalProperties.$uikit.toast;\n}\n\nfunction install(app: App, globalOptions: ToastGlobalOptions) {\n  let instance: VNode | null = null;\n\n  const show = (options: ToastProps = {}) => {\n    if (instance) {\n      instance.component!.exposed!.close();\n    }\n\n    nextTick(() => {\n      const appendTo = document.querySelector(\"[data-v-app]\");\n      const container = document.createElement(\"div\");\n      const vnode = createVNode(FToast, {\n        ...globalOptions,\n        ...options,\n        attach: container,\n        onDestroy: () => {\n          render(null, container);\n          instance = null;\n          appendTo?.removeChild(container);\n        },\n      });\n\n      vnode.appContext = app._context!;\n      render(vnode, container);\n      appendTo?.appendChild(container);\n      instance = vnode;\n\n      instance.component!.exposed!.show();\n    });\n  };\n\n  const clear = () => {\n    if (!instance) return;\n\n    instance!.component!.exposed!.close();\n  };\n\n  const toast = { show, clear };\n  const properties = app.config.globalProperties;\n\n  types.forEach((type) => {\n    toast[type] = (options: ToastProps) => show({ type, ...options });\n  });\n\n  properties.$uikit = properties.$uikit || {};\n  properties.$uikit.toast = toast as ToastMethods;\n}\n\nexport function Toast() {}\n\nToast.install = install;\n"],"names":["useToast","getCurrentInstance","__name","install","app","globalOptions","instance","show","options","nextTick","appendTo","container","vnode","createVNode","FToast","render","toast","properties","types","type","Toast"],"mappings":"sMAyBO,SAASA,GAAW,CAGzB,OAFiBC,IAED,WAAW,OAAO,iBAAiB,OAAO,KAC5D,CAJgBC,EAAAF,EAAA,YAMhB,SAASG,EAAQC,EAAUC,EAAmC,CAC5D,IAAIC,EAAyB,KAE7B,MAAMC,EAAOL,EAAA,CAACM,EAAsB,KAAO,CACrCF,GACOA,EAAA,UAAW,QAAS,QAG/BG,EAAS,IAAM,CACP,MAAAC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAY,SAAS,cAAc,KAAK,EACxCC,EAAQC,EAAYC,EAAQ,CAChC,GAAGT,EACH,GAAGG,EACH,OAAQG,EACR,UAAW,IAAM,CACfI,EAAO,KAAMJ,CAAS,EACXL,EAAA,KACXI,GAAA,MAAAA,EAAU,YAAYC,EACxB,CAAA,CACD,EAEDC,EAAM,WAAaR,EAAI,SACvBW,EAAOH,EAAOD,CAAS,EACvBD,GAAA,MAAAA,EAAU,YAAYC,GACXL,EAAAM,EAEFN,EAAA,UAAW,QAAS,MAAK,CACnC,CAAA,EAzBU,QAkCPU,EAAQ,CAAE,KAAAT,EAAM,MANRL,EAAA,IAAM,CACd,CAACI,GAEKA,EAAA,UAAW,QAAS,OAAM,EAHxB,UAORW,EAAab,EAAI,OAAO,iBAExBc,EAAA,QAASC,GAAS,CAChBH,EAAAG,GAASX,GAAwBD,EAAK,CAAE,KAAAY,EAAM,GAAGX,EAAS,CAAA,CACjE,EAEUS,EAAA,OAASA,EAAW,QAAU,CAAA,EACzCA,EAAW,OAAO,MAAQD,CAC5B,CA9CSd,EAAAC,EAAA,WAgDF,SAASiB,GAAQ,CAAC,CAATlB,EAAAkB,EAAA,SAEhBA,EAAM,QAAUjB"}