{"version":3,"file":"toast.1a8a22f2.js","sources":["../../../../node_modules/vuetify/lib/components/VSnackbar/VSnackbar.mjs","../../src/components/FToast/FToast.tsx","../../src/plugins/toast.ts"],"sourcesContent":["import { mergeProps as _mergeProps, resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VSnackbar.css\";\n\n// Components\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\";\nimport { VOverlay } from \"../VOverlay/index.mjs\"; // Composables\nimport { genOverlays, makeVariantProps, useVariant } from \"../../composables/variant.mjs\";\nimport { makeLocationProps, useLocation } from \"../../composables/location.mjs\";\nimport { makePositionProps, usePosition } from \"../../composables/position.mjs\";\nimport { makeRoundedProps, useRounded } from \"../../composables/rounded.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\";\nimport { useScopeId } from \"../../composables/scopeId.mjs\";\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\"; // Utilities\nimport { mergeProps, onMounted, ref, watch } from 'vue';\nimport { genericComponent, omit, useRender } from \"../../util/index.mjs\";\nimport { filterVOverlayProps, makeVOverlayProps } from \"../VOverlay/VOverlay.mjs\"; // Types\nexport const VSnackbar = genericComponent()({\n  name: 'VSnackbar',\n  props: {\n    multiLine: Boolean,\n    timeout: {\n      type: [Number, String],\n      default: 5000\n    },\n    vertical: Boolean,\n    ...makeLocationProps({\n      location: 'bottom'\n    }),\n    ...makePositionProps(),\n    ...makeRoundedProps(),\n    ...makeVariantProps(),\n    ...omit(makeVOverlayProps({\n      transition: 'v-snackbar-transition'\n    }), ['persistent', 'noClickAnimation', 'scrim', 'scrollStrategy'])\n  },\n  emits: {\n    'update:modelValue': v => true\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const isActive = useProxiedModel(props, 'modelValue');\n    const {\n      locationStyles\n    } = useLocation(props);\n    const {\n      positionClasses\n    } = usePosition(props);\n    const {\n      scopeId\n    } = useScopeId();\n    const {\n      colorClasses,\n      colorStyles,\n      variantClasses\n    } = useVariant(props);\n    const {\n      roundedClasses\n    } = useRounded(props);\n    const overlay = ref();\n    watch(isActive, startTimeout);\n    watch(() => props.timeout, startTimeout);\n    onMounted(() => {\n      if (isActive.value) startTimeout();\n    });\n    let activeTimeout = -1;\n    function startTimeout() {\n      window.clearTimeout(activeTimeout);\n      const timeout = Number(props.timeout);\n      if (!isActive.value || timeout === -1) return;\n      activeTimeout = window.setTimeout(() => {\n        isActive.value = false;\n      }, timeout);\n    }\n    function onPointerenter() {\n      window.clearTimeout(activeTimeout);\n    }\n    useRender(() => {\n      const [overlayProps] = filterVOverlayProps(props);\n      return _createVNode(VOverlay, _mergeProps({\n        \"ref\": overlay,\n        \"class\": ['v-snackbar', {\n          'v-snackbar--active': isActive.value,\n          'v-snackbar--multi-line': props.multiLine && !props.vertical,\n          'v-snackbar--vertical': props.vertical\n        }, positionClasses.value]\n      }, overlayProps, {\n        \"modelValue\": isActive.value,\n        \"onUpdate:modelValue\": $event => isActive.value = $event,\n        \"contentProps\": mergeProps({\n          style: locationStyles.value\n        }, overlayProps.contentProps),\n        \"persistent\": true,\n        \"noClickAnimation\": true,\n        \"scrim\": false,\n        \"scrollStrategy\": \"none\"\n      }, scopeId), {\n        default: () => [_createVNode(\"div\", {\n          \"class\": ['v-snackbar__wrapper', colorClasses.value, roundedClasses.value, variantClasses.value],\n          \"style\": [colorStyles.value],\n          \"onPointerenter\": onPointerenter,\n          \"onPointerleave\": startTimeout\n        }, [genOverlays(false, 'v-snackbar'), slots.default && _createVNode(\"div\", {\n          \"class\": \"v-snackbar__content\",\n          \"role\": \"status\",\n          \"aria-live\": \"polite\"\n        }, [slots.default()]), slots.actions && _createVNode(VDefaultsProvider, {\n          \"defaults\": {\n            VBtn: {\n              variant: 'text',\n              ripple: false\n            }\n          }\n        }, {\n          default: () => [_createVNode(\"div\", {\n            \"class\": \"v-snackbar__actions\"\n          }, [slots.actions()])]\n        })])],\n        activator: slots.activator\n      });\n    });\n    return forwardRefs({}, overlay);\n  }\n});\n//# sourceMappingURL=VSnackbar.mjs.map","import { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport { VSnackbar, VIcon, VDivider } from \"vuetify/components\";\n\nimport \"./FToast.scss\";\n\nexport interface ToastAction {\n  text: string;\n  callback?: () => void;\n}\n\nexport const types = [\"success\", \"warning\", \"error\"] as const;\n\nexport const FToast = defineComponent({\n  name: \"FToast\",\n\n  props: {\n    action: {\n      type: Object as PropType<ToastAction | null>,\n      default: null,\n    },\n    type: String as PropType<typeof types[number]>,\n    message: String,\n  },\n\n  emits: {\n    destroy: () => true,\n  },\n\n  setup(props, { slots, expose, emit }) {\n    const visible = ref(false);\n\n    const presets = {\n      variant: \"flat\",\n      location: \"center center\",\n    } as const;\n\n    const icon = computed(() => {\n      const icons = { success: \"$check\", error: \"$alert\", warning: \"$alert\" };\n\n      return icons[props?.type ?? \"\"];\n    });\n\n    const classes = computed(() => {\n      return [\n        \"f-toast\",\n        { \"f-toast--action\": props.action },\n        props.type && `f-toast--${props.type}`,\n      ];\n    });\n\n    const renderMessage = () => (\n      <div class=\"f-toast__message\">\n        {icon.value && (\n          <VIcon size=\"16\" color={props.type} class=\"mr-4\">\n            {icon.value}\n          </VIcon>\n        )}\n        <span>{slots.default?.() || props.message}</span>\n      </div>\n    );\n\n    const renderActions = () =>\n      props.action && (\n        <div class=\"f-toast__action\" onClick={() => props.action?.callback?.()}>\n          <VDivider vertical class=\"mr-2\" />\n          <span>{props.action.text}</span>\n          <VIcon size=\"14\">$arrow_right</VIcon>\n        </div>\n      );\n\n    const show = () => (visible.value = true);\n\n    const close = () => {\n      visible.value = false;\n      emit(\"destroy\");\n    };\n\n    const update = (v) => (v ? show() : close());\n\n    expose({ show, close });\n\n    watch(\n      () => props.message,\n      () => {\n        console.log(props);\n      }\n    );\n\n    return () => (\n      <VSnackbar\n        modelValue={visible.value}\n        class={classes.value}\n        {...presets}\n        onUpdate:modelValue={update}\n      >\n        {{\n          default: renderMessage,\n          actions: renderActions,\n        }}\n      </VSnackbar>\n    );\n  },\n});\n","import { createVNode, render, getCurrentInstance, nextTick } from \"vue\";\nimport { FToast, types, ToastAction } from \"../components/FToast/FToast\";\n\nimport type { App, VNode } from \"vue\";\n\nexport interface ToastProps {\n  type?: typeof types[number];\n  message?: string;\n  action?: ToastAction;\n}\n\nexport interface ToastGlobalOptions {\n  location: any;\n  timeout: number;\n  [key: string]: any;\n}\n\nexport type ToastHandler = {\n  close: () => void;\n};\n\nexport type Keys = \"show\" | \"success\" | \"error\" | \"warning\" | \"clear\";\n\nexport type ToastMethods = Record<Keys, (options?: ToastProps) => void>;\n\nexport function useToast() {\n  const instance = getCurrentInstance()!;\n\n  return instance.appContext.config.globalProperties.$uikit.toast;\n}\n\nfunction install(app: App, globalOptions: ToastGlobalOptions) {\n  let instance: VNode | null = null;\n\n  const show = (options: ToastProps = {}) => {\n    if (instance) {\n      instance.component!.exposed!.close();\n    }\n\n    nextTick(() => {\n      const appendTo = document.querySelector(\"[data-v-app]\");\n      const container = document.createElement(\"div\");\n      const vnode = createVNode(FToast, {\n        ...globalOptions,\n        ...options,\n        attach: container,\n        onDestroy: () => {\n          render(null, container);\n          instance = null;\n          appendTo?.removeChild(container);\n        },\n      });\n\n      vnode.appContext = app._context!;\n      render(vnode, container);\n      appendTo?.appendChild(container);\n      instance = vnode;\n\n      instance.component!.exposed!.show();\n    });\n  };\n\n  const clear = () => {\n    if (!instance) return;\n\n    instance!.component!.exposed!.close();\n  };\n\n  const toast = { show, clear };\n  const properties = app.config.globalProperties;\n\n  types.forEach((type) => {\n    toast[type] = (options: ToastProps) => show({ type, ...options });\n  });\n\n  properties.$uikit = properties.$uikit || {};\n  properties.$uikit.toast = toast as ToastMethods;\n}\n\nexport function Toast() {}\n\nToast.install = install;\n"],"names":["VSnackbar","genericComponent","makeLocationProps","makePositionProps","makeRoundedProps","makeVariantProps","omit","makeVOverlayProps","v","props","_ref","slots","isActive","useProxiedModel","locationStyles","useLocation","positionClasses","usePosition","scopeId","useScopeId","colorClasses","colorStyles","variantClasses","useVariant","roundedClasses","useRounded","overlay","ref","watch","startTimeout","onMounted","activeTimeout","timeout","__name","onPointerenter","useRender","overlayProps","filterVOverlayProps","_createVNode","VOverlay","_mergeProps","$event","mergeProps","genOverlays","VDefaultsProvider","forwardRefs","types","FToast","defineComponent","name","action","type","Object","default","String","message","emits","destroy","setup","expose","emit","visible","presets","variant","location","icon","computed","success","error","warning","classes","renderMessage","value","VIcon","renderActions","callback","VDivider","text","_createTextVNode","show","close","update","console","log","actions","useToast","getCurrentInstance","install","app","globalOptions","instance","options","nextTick","appendTo","container","vnode","createVNode","render","toast","properties","Toast"],"mappings":"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"}